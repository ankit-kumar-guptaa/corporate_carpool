

<div class="container my-5">
  <h2 class="text-center mb-4">üë§ Welcome to Your Dashboard, {{ loggedInUserName }}!</h2>
 

  <!-- Dashboard Tabs -->
  <ul class="nav nav-tabs mb-4" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" id="dashboard-tab" data-bs-toggle="tab" href="#dashboard" role="tab" aria-controls="dashboard" aria-selected="true">Dashboard</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="myRides-tab" data-bs-toggle="tab" href="#myRides" role="tab" aria-controls="myRides" aria-selected="false">Inbox</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="myConnections-tab" data-bs-toggle="tab" href="#myConnections" role="tab" aria-controls="myConnections" aria-selected="false">Send Request</a>
    </li>
  </ul>

  <!-- Tab Contents -->
  <div class="tab-content">
    <!-- Dashboard Overview Tab -->
    <div class="tab-pane fade show active" id="dashboard" role="tabpanel" aria-labelledby="dashboard-tab">
      <div class="card shadow-sm p-4">
        <h4 class="text-primary">üìä Dashboard Overview</h4>
        <!-- <p>Welcome back! Here you can check the status of your current rides, see statistics, and manage your connections.</p> -->
        <p>
          Welcome back, <strong>{{ loggedInUserName }}</strong>!<br>
          <small class="text-muted">üìß Email: {{ loggedInUserEmail }}</small>
        </p>
        
        <div class="stats-container row mt-4">
          <div class="col-md-4">
            <div class="stat-box bg-light p-3 rounded shadow-sm">
              <h5>üõ£Ô∏è Total Rides</h5>
              <p class="stat-number">{{ totalRidesCount }}</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="stat-box bg-light p-3 rounded shadow-sm">
              <h5>üë• Total Connections</h5>
              <p class="stat-number">{{ connections.length||0 }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- My Rides Tab -->
    <div class="tab-pane fade" id="myRides" role="tabpanel" aria-labelledby="myRides-tab">
      <div class="card shadow-sm p-4">
        <h4 class="text-primary">üöó My Rides</h4>
        <table class="table mt-3">
          <thead class="table-primary">
            <tr>
              <th>Name</th>
              <th>From Address</th>
              <th>To Address</th>
              <th>Contact</th>
              <th>Action</th>
              <th>Info</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let connection of connections">
              <td>{{ connection.name }}</td>
              <td>{{ connection.from_Address }}</td>
              <td>{{ connection.to_Address }}</td>
              <td>
                <span *ngIf="!connection.isaccept">**********</span>
                <span *ngIf="connection.isaccept"> {{ connection.mobile_no }}</span>
               
              
              </td>
              <td>
                <button class="btn btn-primary btn-sm" *ngIf="!connection.isaccept"
                  (click)="AcceptRequest(connection)">
                  <i class="fas fa-eye"></i> Accept
                </button>
                <button class="btn btn-success btn-sm" *ngIf="connection.isaccept">
                  Connected
                </button>
              </td>
              <td>
                <button class="btn btn-primary btn-sm" (click)="openModal(connection)">
                  <i class="fas fa-eye"></i> View
                </button>
              </td>
              
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- My Connections Tab -->
    <div class="tab-pane fade" id="myConnections" role="tabpanel" aria-labelledby="myConnections-tab">
      <div class="card shadow-sm p-4">
        <div class="table-responsive">
          <table class="table table-striped table-hover align-middle">
            <thead class="table-warning">
              <tr>
                <th>Name</th>
                <th>From Address</th>
                <th>To Address</th>
                <th>Contact</th>
                <th>Action</th>
                <th>Info</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let connection of MySendRequests">
                <td>{{ connection.name }}</td>
                <td>{{ connection.from_Address }}</td>
                <td>{{ connection.to_Address }}</td>
                <td>
                  <span *ngIf="!connection.isaccept">**********</span>
                  <span *ngIf="connection.isaccept"> {{ connection.mobile_no }}</span>
                 
                 
                
                </td>
                <td>
                  <button class="btn btn-warning btn-sm" *ngIf="!connection.isaccept">Pending</button>
                  <button class="btn btn-success btn-sm" *ngIf="connection.isaccept">Accepted</button>
                </td>
                <td>
                  <button class="btn btn-primary btn-sm" (click)="openModal(connection)">
                    <i class="fas fa-eye"></i> View
                  </button>
                </td>
                
              </tr>
            </tbody>
          </table>
        </div>
      
      </div>
    </div>
  </div>
</div>






<!-- Custom Modal -->
<div id="customModal" class="modal-container" [ngClass]="{'show': isModalVisible}" (click)="closeModal($event)">
  <div class="modal-content" (click)="stopPropagation($event)">
    <div class="modal-header">
      <h5 class="modal-title">üë§ User Details</h5>
      <button class="close-btn" (click)="closeModal()">‚úñ</button>
    </div>
    <div class="modal-body">
      <p><strong>Name:</strong> {{ selectedUser?.name }}</p>
      <p><strong>Email:</strong> {{ selectedUser?.email || 'N/A' }}</p>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" (click)="closeModal()">Close</button>
    </div>
  </div>
</div>


